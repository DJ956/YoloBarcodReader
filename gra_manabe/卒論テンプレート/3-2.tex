%第3章



\section{基本設計}

問題領域やシステムの構造を論理的，静的にみるためにクラス図を作成した．以下にICタグを用いた商品識別システムのクラス図として，図\ref{class_ic}を載せる．

\begin{figure}[htbp]
\centering
\includegraphics[width=15cm]{./picture/class_ic.eps}
\caption{ICタグを用いたシステムのクラス図}
\label{class_ic}
\end{figure}


以下にQRコードを用いた商品識別システムのクラス図，図\ref{class_qr}を載せる．


\begin{figure}[htbp]
\centering
\includegraphics[width=15cm]{./picture/class_qr.eps}
\caption{QRコードを用いたシステムのクラス図}
\label{class_qr}
\end{figure}


本研究では，クラスとしてカート・解析システム・カゴDB・商品DBの部分を開発対象とした．本研究で実装する優先度の高いシステムのクラス図を図\ref{class_qr_2}に示す．


\begin{figure}[htbp]
\centering
\includegraphics[width=15cm]{./picture/class_qr_2.eps}
\caption{高優先度のシステムのクラス図}
\label{class_qr_2}
\end{figure}


基本設計の段階で，それぞれの用途のために各種センサを選定した．下記に選定したセンサと選定理由を述べる．


\subsection{Webカメラの選定}


まず，バーコードを読み取る装置の選定である．本章の最初に述べた基本の評価軸より，コストを抑えられるか，従来のセミセルフレジより簡単な動作で決済まで行えるか，かつバーコードを読み取ることができる装置，加えて拡張性のある装置かどうかを基準として選定した．コストを抑えているかつバーコードを読み取ることができる装置として，バーコードリーダー，Webカメラが挙げられる．バーコードリーダーとWebカメラを比較した表を下記表\ref{came}に示す．


\begin{table}[htb]
\begin{center}
\caption{バーコードリーダーとWebカメラの比較}
\begin{tabular}{|l|c|c|c|c|} \hline
装置 & 価格 & 簡単さ &バーコードの読み取りの可否 & 拡張性 \\ \hline \hline
バーコードリーダー & 〇 & × & 〇 & × \\
Webカメラ & 〇 & △ & 〇 &  〇 \\ \hline
\end{tabular}
\label{came}
\end{center}
\end{table}


価格はどちらも2,000円台から購入できるため，2,000円のバーコードリーダやWebカメラをカゴ1個につき1台分購入したとしてもカゴ90個で180,000円とコストを抑えることが可能である．しかしながら簡単さにおいては，バーコードリーダーを使用する場合は従来のセミセルフレジの店員と同じ動きをしなければならないため，×の評価がつく．Webカメラにおいては，カゴ1個につき1台を導入したとすると定点カメラとなるため，カメラ側にバーコードを向けるという手間がかかる．拡張性についてはWebカメラの場合，バーコードをカメラに向けなくても商品の形状から商品もしくは商品の種類をを特定できるようになる等の例が挙げられた．上記より要件を満たすとして，本研究ではバーコードを読み取る装置としてWebカメラを選定した．


\subsection{超音波センサの選定}


次に，ユーザが商品をカゴに出し入れした際の動作の検知を行う装置の選定を行った．消費電力を低く抑えるため，手もしくは商品が手もしくは商品がセンサの前を通った際のみにWebカメラが画像を撮影するという状況を想定した．検知するセンサとして，焦電型赤外線センサ，レーザ距離センサ，超音波センサが挙げられた．カゴの上部にセンサを設置するとしたとき，買い物カゴの奥行はおよそ360mm程であるため，その程度の距離に適しているか，また手や商品が通った時のみにセンサが反応するかを基準としてセンサの選定を行った．比較した表を下記の表\ref{kyori}に示す．


\begin{table}[htb]
\begin{center}
\caption{動作を検知するセンサの比較}
\begin{tabular}{|l|c|c|c|c|} \hline
 & 焦電型赤外線センサ & レーザ距離センサ & 超音波センサ \\ \hline \hline
価格 & 〇 500円程度 & △ 1,000円程度 & 〇 500円程度 \\
適性距離 & × 3～5m & 〇3～200cm & 〇 2～400cm \\ 
反応要件 & × 感知距離が広すぎる & △ 色による影響有 & 〇 色，形状，汚れに強い \\ \hline
\end{tabular}
\label{kyori}
\end{center}
\end{table}

上記の\ref{kyori}より，超音波センサが要件を満たしている．以上より，本研究ではユーザが商品をカゴに出し入れした際の動作の検知を行う装置として超音波センサを用いた．


\subsection{ロードセルの選定}

ユーザが商品を追加するか削除するかを判別するために，ユーザがボタンを押すなどの特別な動作をしないと考えた際，カゴの底に台を設置し，重量を検知，重量が増加すれば追加，重量が減少すれば削除と判断するとした．その際，商品の重量を検知するセンサの選定を行った．重量を検知するセンサとして，感圧センサとロードセルが候補として挙がった．基本の評価軸から，コストは抑えられるか，商品の総重量が約2kg程だとすると2kgまで検知できるかどうか，g単位で重量の増加，減少を検知できるか，カゴの底面積の半分ほどの広さとして約$255\times180mm$を最低でも検知できるかを基準とし，選定をした．比較した内容を下記の表\ref{rodo}に示す．


\begin{table}[htb]
\begin{center}
\caption{重量を検知するセンサの比較}
\begin{tabular}{|l|c|c|} \hline
 & 感圧センサ & ロードセル \\ \hline \hline
価格 & △ 1,300円程度 & 〇 600円程度 \\
検知できる重量 & 〇 100g～2kg程度  & 〇 3kg程度 \\ 
感度，精度 & △ 100g単位での検知 & 〇 g単位で検知可能 \\
検知範囲 & × 感知範囲が狭すぎる & 〇 ただし，板設置要 \\ \hline
\end{tabular}
\label{rodo}
\end{center}
\end{table}